# jenkins自动化部署
每次提交代码后，需要手动部署项目，随着团队人数越来越多，提交的次数也越多，部署的时间占用了我越来越多的时间

## windows 系统
### 1. [官网下载](https://www.jenkins.io/download/)
选择长期支持并且稳定的windows版本
![](https://img-blog.csdnimg.cn/17d1e7016b2a49e9bebebed1ca684d7d.png)

**安装jenkins之前需要安装一下jdk**
### 2.安装jdk和配置环境
安装就无脑咔咔咔的安装
**因为一般我们使用的jdk版本为jdk1.8，但是jenkins新版本规定，必须使用jdk11以上版本的jdk，所以，我们的环境中可能存在多个jdk**
具体怎么配置请百度

### 3. 安装jenkins
1. 点击安装jenkins.mis
   
   ![](https://img-blog.csdnimg.cn/94535a65d1e44ee9ac5ad2075cfbf211.png)

2. 设置安装路径，之后next
   
   ![](https://img-blog.csdnimg.cn/00192fa60fe54f3e8621f5dcf4d6dc03.png)

3. 选择`Run service as LocalSystem`,选这个安装简单，如果为了安全，可以选择第二个；
   
   ![](https://img-blog.csdnimg.cn/98f8d8ebbae840a19185bdab63a67791.png)

4. 设置端口号为18080，由于8080经常被开发的项目使用，这里使用了18080
   
   ![](https://img-blog.csdnimg.cn/e9a594e6af024382bbc8ee9d491ffd32.png)

5. 点击Test Port,之后Next
   
   ![](https://img-blog.csdnimg.cn/c1ea81d2309740c3b6770e844e187aec.png)

6. Jenkins需要依赖JDK11,这里使用jdk-11.0.17
   
   ![](https://img-blog.csdnimg.cn/4e0e1613213349fe91aeeb0b83785d75.png)

7. 保持默认，继续下一步
   
   ![](https://img-blog.csdnimg.cn/610ecc5aee5446dd8b3e987431cf988e.png)

8. 配置好JENKINS_HOME环境变量后，开始Install安装
   
   ![](https://img-blog.csdnimg.cn/14fe275d040942a49288ba4ef4e58c74.png)

9. 中间点击确定，之后到达这个页面，点击Finish完成
   
   ![](https://img-blog.csdnimg.cn/ef62fc5ca02e46bdb2d1b230faf5b3ed.png)

### 4.修改jenkins.xml配置文件
1. 查看“服务”，jenkin已经运行了，win系统中，jenkins是以服务的形式运行的，这样也比较方便；
   
   ![](https://img-blog.csdnimg.cn/1643f2547c074b00a8790546faf26bbf.png)

2. 由于jenkins文件数据默认安装到了C:\ProgramData\Jenkins，现在将数据更换放置到D盘D:\Program Files\Jenkins\Jenkins_home
   先停止jenkins服务

   ![](https://img-blog.csdnimg.cn/636342bc62d144c2bb760b6a8ac7c407.png)

3. 修改jenkins安装目录中的配置文件

   [![Snipaste-2023-07-27-14-41-46.png](https://i.postimg.cc/FHb5fFDM/Snipaste-2023-07-27-14-41-46.png)](https://postimg.cc/tsgmwb0k)

   修改JENKINS_HOME为D:\Program Files\Jenkins\Jenkins_home

   [![Snipaste-2023-07-27-14-15-05.png](https://i.postimg.cc/wv8wDDMF/Snipaste-2023-07-27-14-15-05.png)](https://postimg.cc/67cVX2dG)

   修改最大堆内存为512m,256m的太小了；
   同时修改webroot路径为%JENKINS_HOME%\war ---> D:\kf\jenkins_home\war;
   注释掉的–httpPort 和 --webroot，用\来分隔了,不然xml文件报错，无法启动

   [![Snipaste-2023-07-27-14-17-20.png](https://i.postimg.cc/qvWwd2s0/Snipaste-2023-07-27-14-17-20.png)](https://postimg.cc/CRHkGBr6)

   ​ 修改pid的位置

   [![Snipaste-2023-07-27-14-18-15.png](https://i.postimg.cc/Tw3p74KP/Snipaste-2023-07-27-14-18-15.png)](https://postimg.cc/yJ21WnXq)

4. 启动 jenkins服务
   
   ![](https://img-blog.csdnimg.cn/e6b82f629e574e898f21cd276a6eef9d.png)

### 5.浏览器访问，进行初始设置
1. 访问jenkins地址：http://localhost:18080,找到密码，点击继续
   
   [![Snipaste-2023-07-27-14-48-03.png](https://i.postimg.cc/85NnqhGc/Snipaste-2023-07-27-14-48-03.png)](https://postimg.cc/B87gFPXf)

2. 选择插件来安装
   
   ![](https://img-blog.csdnimg.cn/bfc41f987b9b46719d21ef92c378d85c.png)

3. 选择不安装任何插件，点击安装
   
   ![](https://img-blog.csdnimg.cn/e0b3691dbff14d0e9e069890528e965e.png)

4. 创建管理员用户，保存并完成
   这里创建用户名为`jenkinsAdmin`
   
   ![](https://img-blog.csdnimg.cn/ae47cc73dd474c38bdf84592fa93fbf5.png)

5. 配置请求地址，这个还保持默认，点击保存并完成
   
   ![](https://img-blog.csdnimg.cn/bf72cbfd5cbd4d22967beb45c898cc36.png)

6. 点击开始使用
   
   ![](https://img-blog.csdnimg.cn/fc77982075784d9dac1b3363b18542a0.png)

7. jenkins安装完成
   
   ![](https://img-blog.csdnimg.cn/e5e42c44a76543ac9e53ad47c5b4b377.png)

### 6.配置jenkins系统和插件
1. 点击进入插件管理
   
   ![](https://img-blog.csdnimg.cn/02ca423b6bdd4fa0a1854e214a7e1956.png)

2. 先修改插件的镜像地址
   默认的镜像URL网络可能慢： https://updates.jenkins.io/update-center.json
   修改为清华大学的URL：https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json

   点击提交Submit
   
   ![](https://img-blog.csdnimg.cn/d1a2b6cbdbd44736951d13472de4ab60.png)

3. 安装插件
   Chinese (Simplified)

   Credentials Binding

   Maven Integration

   Subversion

   Publish Over SSH

   Git
   
   之后点击确认，安装

   ![](https://img-blog.csdnimg.cn/89d176e775fd470282f3e6b44bcb9a68.png)

   安装过程如下，安装完成后，重启一下jenkins

   ![](https://img-blog.csdnimg.cn/fffcd5af489b4e9d9d437aa4b7664099.png)

4. 重启jenkins服务，刷新网页，插件会开始生效
   
   ![](https://img-blog.csdnimg.cn/5a5a297323204794950dab614d1bc681.png)

5. 进入系统配置，配置SSH over SSH
   
   ![](https://img-blog.csdnimg.cn/dbac03c3e6e3498d91dd5c4a7ec2ec72.png)

   1) 先填写服务器的密码
   
    ![](https://img-blog.csdnimg.cn/fcd6b0f66a534192be1d4d290230c1b4.png)

   2) 之后填写服务器的地址和用户名，设置可以访问的目录，之后点击Test测试，配置正确会Success,保存即可。
   
    ![](https://img-blog.csdnimg.cn/7f3a5fca973543deaa97158da021fe92.png)

6. 进入Global Tool 配置 maven和jdk
   
   ![](https://img-blog.csdnimg.cn/b94536d592524a9bb886b95160da93ae.png)

   1) 配置maven的settings.xml文件位置
   
    ![](https://img-blog.csdnimg.cn/669d77de625a4195951bcbbaa1a8ce3d.png)

   2) 配置JDK的，这里我项目用的是1.8

    ![](https://img-blog.csdnimg.cn/e644efa23ca840eb914aada918f50e66.png)

   3) 配置maven软件的路径，之后点击保存
   
    ![](https://img-blog.csdnimg.cn/6bdfadbe2f55445cbecf3edcb03b1e87.png)

### 7.新建自动部署任务
