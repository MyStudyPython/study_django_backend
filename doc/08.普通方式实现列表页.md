先了解Django中实现Json数据传递的基本方法，可以查看英文文文档[Django v4.2.3](https://django.readthedocs.io/en/stable/)，并结合中文文档[Django v4.1 中文文档](https://www.bookstack.cn/read/django-4.1-zh/0d0674122cbf90ff.md) 了解其用法。

# 1.使用Django View实现商品列表
下面实现通过View类直接将商品信息显示到前端。

为了区别于views.py，在apps/goods下新建views_base.py如下：
```py
import json

from django.views.generic.base import View
from django.http import HttpResponse

from goods.models import Goods


class MyEncoder(json.JSONEncoder):
    def default(self, obj):
        if isinstance(obj, bytes):
            return str(obj, encoding='utf-8')

        return json.JSONEncoder.default(self, obj)


class GoodsListView(View):
    def get(self, request):
        '''通过View实现商品列表页'''
        json_list = []
        goods = Goods.objects.all()[:10]
        for good in goods:
            json_dict = {}
            json_dict["name"] = good.name
            json_dict["category"] = good.category.name
            json_dict["market_price"] = good.market_price
            json_list.append(json_dict)
        return HttpResponse(json.dumps(json_list, ensure_ascii=False), content_type='application/json')

```

urls.py中加入路由如下：
```diff
  from django.urls import path
  from django.views.static import serve
+ from django.views.generic import RedirectView

  import xadmin

  from FreshECommerce.settings import MEDIA_ROOT

+ from goods.views_base import GoodsListView

urlpatterns = [
-    # path("xadmin/", xadmin.site.urls),
+    # 这是直接把 /xadmin 设置为主页，但是没有指向
+    # path("", xadmin.site.urls),
+    # 这是直接指向了/xadmin
+    path("", RedirectView.as_view(url="/xadmin/")),
     path("xadmin/", xadmin.site.urls),
     # url(r'^media/(?P<path>.*)$', serve, {'document_root':MEDIA_ROOT}),
     path("media/<path:path>", serve, {"document_root": MEDIA_ROOT}),
+    # 商品列表页
+    path("goods/", GoodsListView.as_view(), name="goods-list"),
]
```

显示：

![](https://img-blog.csdnimg.cn/20200725154240271.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0NVRkVFQ1I=,size_16,color_FFFFFF,t_70)